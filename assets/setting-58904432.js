import{E as D,d as Z,r as f,c as ee,o as le,n as M,g as te,s as S,i as ae,a as oe,b as e,e as c,f as g,F as C,h as ne,j as se,k as ie,l as re,u as B,m as ue}from"./index-d4851931.js";const ce=a=>{let d="";if(!/^#?[0-9A-Fa-f]{6}$/.test(a))return D.warning("输入错误的hex");a=a.replace("#",""),d=a.match(/../g);for(let s=0;s<3;s++)d[s]=parseInt(d[s],16);return d},de=(a,d,l)=>{const s=/^\d{1,3}$/;if(!s.test(a)||!s.test(d)||!s.test(l))return D.warning("输入错误的rgb颜色值");const i=[a.toString(16),d.toString(16),l.toString(16)];for(let y=0;y<3;y++)i[y].length==1&&(i[y]=`0${i[y]}`);return`#${i.join("")}`},G=(a,d)=>{if(!/^#?[0-9A-Fa-f]{6}$/.test(a))return D.warning("输入错误的hex颜色值");const s=ce(a);for(let i=0;i<3;i++)s[i]=Math.floor((255-s[i])*d+s[i]);return de(s[0],s[1],s[2])},ye=a=>a.replace(/(^\s*)|(\s*$)/g,""),ge=(a,d)=>{document.getElementById(d)!==null&&document.body.removeChild(document.getElementById(d));const l=document.createElement("canvas");l.width=200,l.height=100;const s=l.getContext("2d");s.rotate(-15*Math.PI/180),s.font="12px",s.fillStyle="rgba(200, 200, 200, 0.30)",s.textBaseline="Middle",s.fillText(a,l.width/10,l.height/2);const i=document.createElement("div");i.id=d,i.style.pointerEvents="none",i.style.top="15px",i.style.left="0px",i.style.position="fixed",i.style.zIndex="10000000",i.style.width=`${document.documentElement.clientWidth}px`,i.style.height=`${document.documentElement.clientHeight}px`,i.style.background=`url(${l.toDataURL("image/png")}) left top repeat`,document.body.appendChild(i)},I=Math.random().toString(),A={set:a=>{ge(a,I)},del:()=>{document.getElementById(I)!==null&&document.body.removeChild(document.getElementById(I))}};function pe(a){return typeof a=="function"||Object.prototype.toString.call(a)==="[object Object]"&&!ie(a)}const he=Z({setup(){const{proxy:a}=re(),d=f(!1),l=ee(()=>B().useThemeStore),s=n=>{i(`--color-${n}`,l.value[n]),E()},i=(n,p)=>{document.documentElement.style.setProperty(n,p);for(let m=1;m<=9;m++)document.documentElement.style.setProperty(`${n}-light-${m}`,G(p,m/10))},y=n=>{document.documentElement.style.setProperty(`--bg-${n}`,l.value[n]),o(),k(),h(),E()},o=()=>{w(".layout-navbar-breadcrumb-index",l.value.isTopBarColorGradual,l.value.topBar)},k=()=>{w(".layout-container .el-aside",l.value.isMenuBarColorGradual,l.value.menuBar)},h=()=>{w(".layout-container .layout-columns-aside",l.value.isColumnsMenuBarColorGradual,l.value.columnsMenuBar)},w=(n,p,m)=>{M(()=>{const V=document.querySelector(n);if(!V)return!1;p?V.setAttribute("style",`background-image:linear-gradient(to bottom left , ${m}, ${G(m,.6)})`):V.setAttribute("style",`background-image:${m}`),r()})},b=()=>{M(()=>{setTimeout(()=>{const n=document.querySelectorAll(".el-menu-item"),p=document.querySelector(".el-menu-item.is-active");if(!p)return!1;l.value.isMenuBarColorHighlight?(n.forEach(m=>m.setAttribute("id","")),p.setAttribute("id","add-is-active"),S("menuBarHighlightId",p.getAttribute("id"),{type:"localStorage"})):p.setAttribute("id",""),r()},0)})},t=()=>{b(),E()},u=()=>{l.value.isFixedHeaderChange=!l.value.isFixedHeader,r()},v=()=>{l.value.isBreadcrumb=!1,r(),a.mittBus.emit("getBreadcrumbIndexSetFilterRoutes")},U=()=>{l.value.isShowLogoChange=!l.value.isShowLogo,r()},H=()=>{l.value.layout==="classic"&&(l.value.isClassicSplitMenu=!1),r()},P=()=>{a.mittBus.emit("openOrCloseSortable"),r()},z=()=>{a.mittBus.emit("openShareTagsView"),r()},x=n=>{n==="grayscale"?l.value.isGrayscale&&(l.value.isInvert=!1):l.value.isInvert&&(l.value.isGrayscale=!1);const p=n==="grayscale"?`grayscale(${l.value.isGrayscale?1:0})`:`invert(${l.value.isInvert?"80%":"0%"})`;document.body.setAttribute("style",`filter: ${p}`),r()},F=()=>{const n=document.documentElement;l.value.isIsDark?n.setAttribute("data-theme","dark"):n.setAttribute("data-theme","")},$=()=>{l.value.isWatermark?A.set(l.value.watermarkText):A.del(),r()},R=n=>{if(l.value.watermarkText=ye(n),l.value.watermarkText==="")return!1;l.value.isWatermark&&A.set(l.value.watermarkText),r()},W=n=>{if(S("oldLayout",JSON.stringify(n),{type:"localStorage"}),l.value.layout===n)return!1;l.value.layout=n,l.value.isDrawer=!1,T(),b()},T=()=>{y("menuBar"),y("menuBarColor"),y("topBar"),y("topBarColor")},q=()=>{l.value.isFixedHeaderChange=!1,l.value.isShowLogoChange=!1,l.value.isDrawer=!1,r()},O=()=>{l.value.isDrawer=!0},E=()=>{r(),_()},r=()=>{B().useThemeStore=l.value},_=()=>{S("themeConfigStyle",document.documentElement.style.cssText,{type:"localStorage"})},j=()=>{const n=B().useThemeStore;n.isDrawer=!1,ue(JSON.stringify(n)).then(()=>{l.value.isDrawer=!1})},N=()=>{B().useThemeStore.$reset(),window.location.reload()},L=()=>{setTimeout(()=>{o(),k(),h(),b()},1300)};le(()=>{M(()=>{te("frequency",{type:"localStorage"})||T(),S("frequency","1",{type:"localStorage"}),a.mittBus.on("onSignInClick",()=>{L()}),a.mittBus.on("onMenuClick",()=>{b()}),a.mittBus.on("layoutMobileResize",n=>{l.value.layout=n.layout,l.value.isDrawer=!1,T(),b(),d.value=ae()}),setTimeout(()=>{L(),l.value.isGrayscale&&x("grayscale"),l.value.isInvert&&x("invert"),l.value.isIsDark&&F(),$()},100)})}),oe(()=>{a.mittBus.off("onMenuClick"),a.mittBus.off("onSignInClick"),a.mittBus.off("layoutMobileResize")});const J=f([{label:"primary",key:"primary",type:"color"},{label:"success",key:"success",type:"color"},{label:"info",key:"info",type:"color"},{label:"warning",key:"warning",type:"color"},{label:"danger",key:"danger",type:"color"}]),K=f([{label:"顶栏背景",key:"topBar",onChange:()=>y("topBar"),type:"color"},{label:"菜单背景",key:"menuBar",onChange:()=>y("menuBar"),type:"color"},{label:"分栏菜单背景",key:"columnsMenuBar",onChange:()=>y("columnsMenuBar"),type:"color"},{label:"顶栏默认字体颜色",key:"topBarColor",onChange:()=>y("topBarColor"),type:"color"},{label:"菜单默认字体颜色",key:"menuBarColor",onChange:()=>y("menuBarColor"),type:"color"},{label:"分栏菜单默认字体颜色",key:"columnsMenuBarColor",onChange:()=>y("columnsMenuBarColor"),type:"color"},{label:"顶栏背景渐变",key:"isTopBarColorGradual",onChange:()=>o(),type:"switch"},{label:"菜单背景渐变",key:"isMenuBarColorGradual",onChange:()=>k(),type:"switch"},{label:"分栏菜单背景渐变",key:"isColumnsMenuBarColorGradual",onChange:()=>h(),type:"switch"},{label:"菜单字体背景高亮",key:"isMenuBarColorHighlight",onChange:()=>b(),type:"switch"}]),Q=f([{label:"侧边栏 Logo",key:"isShowLogo",type:"switch",onChange:()=>U()},{label:"开启 Breadcrumb",key:"isBreadcrumb",type:"switch",style:{opacity:l.value.layout==="classic"||l.value.layout==="transverse"?.5:1},disabled:l.value.layout==="classic"||l.value.layout==="transverse",onChange:()=>H()},{label:"开启 Breadcrumb 图标",key:"isBreadcrumbIcon",type:"switch",onChange:()=>r()},{label:"开启 TagView",key:"isTagView",type:"switch",onChange:()=>r()},{label:"开启 TagView 图标",key:"isTagViewIcon",type:"switch",onChange:()=>r()},{label:"开启 TagView 缓存",key:"isCacheTagView",type:"switch",onChange:()=>r()},{label:"开启 TagView 拖拽",key:"isSortableTagView",type:"switch",style:{opacity:d.value?.5:1},disabled:d.value,onChange:()=>P()},{label:"开启 TagView 共用",key:"isShareTagView",type:"switch",onChange:()=>z()},{label:"开启 Footer",key:"isFooter",type:"switch",onChange:()=>r()},{label:"灰色模式",key:"isGrayscale",type:"switch",onChange:()=>x("grayscale")},{label:"色弱模式",key:"isInvert",type:"switch",onChange:()=>x("invert")},{label:"深色模式",key:"isIsDark",type:"switch",onChange:()=>F()},{label:"开启水印",key:"isWatermark",type:"switch",onChange:()=>$()},{label:"水印文案",key:"watermarkText",type:"input",elStyle:{width:"90px"},disabled:d.value,onInput:n=>R(n)}]),X=f([{label:"菜单水平折叠",key:"isCollapse",type:"switch",onChange:()=>t()},{label:"菜单手风琴",key:"isUniqueOpened",type:"switch",onChange:()=>r()},{label:"固定 Header",key:"isFixedHeader",type:"switch",onChange:()=>u()},{label:"经典布局分割菜单",key:"isClassicSplitMenu",type:"switch",style:{opacity:l.value.layout!=="classic"?.5:1},onChange:()=>v()},{label:"开启锁屏",key:"isLockScreen",type:"switch",onChange:()=>r()},{label:"自动锁屏(s/秒)",key:"lockScreenTime",type:"input-number",elStyle:{width:"90px"},onChange:()=>r()}]),Y=f([{label:"TagView 风格",key:"tagStyle",type:"select",elStyle:{width:"90px"},onChange:()=>r(),options:[{label:"风格1",value:"tags-style-one"},{label:"风格2",value:"tags-style-two"},{label:"风格3",value:"tags-style-three"},{label:"风格4",value:"tags-style-four"},{label:"风格5",value:"tags-style-five"}]},{label:"主页面切换动画",key:"animation",type:"select",elStyle:{width:"90px"},onChange:()=>r(),options:[{label:"slide-right",value:"slide-right"},{label:"slide-left",value:"slide-left"},{label:"opacitys",value:"opacitys"}]},{label:"分栏高亮风格",key:"columnsAsideStyle",type:"select",elStyle:{width:"90px"},onChange:()=>r(),options:[{label:"圆角",value:"columns-round"},{label:"卡片",value:"columns-card"}]},{label:"分栏布局风格",key:"columnsAsideLayout",type:"select",elStyle:{width:"90px"},onChange:()=>r(),options:[{label:"水平",value:"columns-horizontal"},{label:"垂直",value:"columns-vertical"}]}]);return{globalTheme:J,globalMenu:K,globalPageShow:Q,globalPageSetting:X,otherSetting:Y,openDrawer:O,onColorPickerChange:s,themeConfig:l,onDrawerClose:q,onSetLayout:W,onCopyConfigClick:j,onResetConfigClick:N}},render(){const{globalTheme:a,globalMenu:d,globalPageShow:l,globalPageSetting:s,otherSetting:i,onColorPickerChange:y,themeConfig:o,onDrawerClose:k,onSetLayout:h,onCopyConfigClick:w,onResetConfigClick:b}=this;return e(C,null,[e("div",{class:"layout-breadcrumb-setting"},[e(c("el-drawer"),{title:"布局配置",modelValue:o.isDrawer,"onUpdate:modelValue":t=>o.isDrawer=t,direction:"rtl","destroy-on-close":!0,size:"240px",onClose:k},{default:()=>[e(c("el-scrollbar"),{class:"layout-breadcrumb-setting-bar"},{default:()=>[e(c("el-divider"),{"content-position":"left"},{default:()=>[g("全局主题")]}),a.map(t=>e(C,null,[e("div",{class:"layout-breadcrumb-setting-bar-flex"},[e("div",{class:"layout-breadcrumb-setting-bar-flex-label"},[t.label]),e("div",{class:"layout-breadcrumb-setting-bar-flex-value"},[e(c("el-color-picker"),{modelValue:o[t.key],"onUpdate:modelValue":u=>o[t.key]=u,onChange:()=>y(t.key)},null)])])])),e(c("el-divider"),{"content-position":"left"},{default:()=>[g("菜单 / 顶栏")]}),d.map(t=>e(C,null,[e("div",{class:"layout-breadcrumb-setting-bar-flex"},[e("div",{class:"layout-breadcrumb-setting-bar-flex-label"},[t.label]),e("div",{class:"layout-breadcrumb-setting-bar-flex-value"},[t.type==="color"&&e(c("el-color-picker"),{modelValue:o[t.key],"onUpdate:modelValue":u=>o[t.key]=u,onChange:()=>(t==null?void 0:t.onChange)&&t.onChange()},null),t.type==="switch"&&e(c("el-switch"),{modelValue:o[t.key],"onUpdate:modelValue":u=>o[t.key]=u,onChange:()=>t.onChange()},null)])])])),e(c("el-divider"),{"content-position":"left"},{default:()=>[g("界面设置")]}),s.map(t=>e(C,null,[e("div",{class:"layout-breadcrumb-setting-bar-flex"},[e("div",{class:"layout-breadcrumb-setting-bar-flex-label"},[t.label]),e("div",{class:"layout-breadcrumb-setting-bar-flex-value"},[t.type==="input-number"&&e(c("el-input-number"),{modelValue:o[t.key],"onUpdate:modelValue":u=>o[t.key]=u,"controls-position":"right",min:1,max:9999,onChange:()=>t.onChange(),size:"small",style:t.elStyle},null),t.type==="switch"&&e(c("el-switch"),{modelValue:o[t.key],"onUpdate:modelValue":u=>o[t.key]=u,onChange:()=>t.onChange()},null)])])])),e(c("el-divider"),{"content-position":"left"},{default:()=>[g("界面显示")]}),l.map(t=>e(C,null,[e("div",{class:"layout-breadcrumb-setting-bar-flex",style:t.style||{}},[e("div",{class:"layout-breadcrumb-setting-bar-flex-label"},[t.label]),e("div",{class:"layout-breadcrumb-setting-bar-flex-value"},[t.type==="color"&&e(c("el-color-picker"),{modelValue:o[t.key],"onUpdate:modelValue":u=>o[t.key]=u,onChange:()=>(t==null?void 0:t.onChange)&&t.onChange()},null),t.type==="switch"&&e(c("el-switch"),{modelValue:o[t.key],"onUpdate:modelValue":u=>o[t.key]=u,disabled:t.disabled||!1,onChange:()=>t.onChange()},null),t.type==="input"&&e(c("el-input"),{modelValue:o[t.key],"onUpdate:modelValue":u=>o[t.key]=u,disabled:t.disabled||!1,style:t.elStyle||{},onInput:u=>t.onInput(u)},null)])])])),e(c("el-divider"),{"content-position":"left"},{default:()=>[g("其它设置")]}),i.map(t=>{let u;return e(C,null,[e("div",{class:"layout-breadcrumb-setting-bar-flex",style:t.style||{}},[e("div",{class:"layout-breadcrumb-setting-bar-flex-label"},[t.label]),e("div",{class:"layout-breadcrumb-setting-bar-flex-value"},[t.type==="select"&&e(c("el-select"),{modelValue:o[t.key],"onUpdate:modelValue":v=>o[t.key]=v,placeholder:"请选择",size:"small",style:t.elStyle,onChange:()=>t.onChange()},pe(u=t.options.map(v=>e(C,null,[e(c("el-option"),{label:v.label,value:v.value},null)])))?u:{default:()=>[u]})])])])}),e(c("el-divider"),{"content-position":"left"},{default:()=>[g("布局切换")]}),e("div",{class:"layout-drawer-content-flex"},[e("div",{class:"layout-drawer-content-item",onClick:()=>h("default")},[e("section",{class:["el-container","el-circular",o.layout==="default"?"drawer-layout-active":""]},[e("aside",{class:"el-aside",style:"width: 20px"},null),e("section",{class:"el-container is-vertical"},[e("header",{class:"el-header",style:"height: 10px"},null),e("main",{class:"el-main"},null)])]),e("div",{class:["layout-tips-warp",o.layout==="default"?"layout-tips-warp-active":""]},[e("div",{class:"layout-tips-box"},[e("p",{class:"layout-tips-txt"},[g("默认")])])])]),e("div",{class:"layout-drawer-content-item",onClick:()=>h("classic")},[e("section",{class:["el-container","is-vertical","el-circular",o.layout==="classic"?"drawer-layout-active":""]},[e("header",{class:"el-header",style:"height: 10px"},null),e("section",{class:"el-container"},[e("aside",{class:"el-aside",style:"width: 20px"},null),e("section",{class:"el-container is-vertical"},[e("main",{class:"el-main"},null)])])]),e("div",{class:["layout-tips-warp",o.layout==="classic"?"layout-tips-warp-active":""]},[e("div",{class:"layout-tips-box"},[e("p",{class:"layout-tips-txt"},[g("经典")])])])]),e("div",{class:"layout-drawer-content-item",onClick:()=>h("transverse")},[e("section",{class:["el-container","is-vertical","el-circular",o.layout==="transverse"?"drawer-layout-active":""]},[e("header",{class:"el-header",style:"height: 10px"},null),e("section",{class:"el-container"},[e("section",{class:"el-container is-vertical"},[e("main",{class:"el-main"},null)])])]),e("div",{class:["layout-tips-warp",o.layout==="transverse"?"layout-tips-warp-active":""]},[e("div",{class:"layout-tips-box"},[e("p",{class:"layout-tips-txt"},[g("横向")])])])]),e("div",{class:"layout-drawer-content-item",onClick:()=>h("columns")},[e("section",{class:["el-container","el-circular",o.layout==="columns"?"drawer-layout-active":""]},[e("aside",{class:"el-aside-dark",style:"width: 10px"},null),e("aside",{class:"el-aside",style:"width: 20px"},null),e("section",{class:"el-container is-vertical"},[e("header",{class:"el-header",style:"height: 10px"},null),e("main",{class:"el-main"},null)])]),e("div",{class:["layout-tips-warp",o.layout==="columns"?"layout-tips-warp-active":""]},[e("div",{class:"layout-tips-box"},[e("p",{class:"layout-tips-txt"},[g("分栏")])])])]),e("div",{class:"copy-config"},[e(c("el-button"),{size:"small",class:"copy-config-btn",type:"primary",ref:"copyConfigBtnRef",onClick:w},{default:()=>[e(c("el-icon"),null,{default:()=>[e(ne,null,null)]}),g("一键复制配置")]}),e(c("el-button"),{size:"small",class:"copy-config-btn-reset",type:"info",onClick:b},{default:()=>[e(c("el-icon"),null,{default:()=>[e(se,null,null)]}),g("一键恢复默认")]})])])]})]})])])}});export{he as default};
